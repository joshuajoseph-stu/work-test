<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Sign Up</title>
    <link rel="stylesheet" href="signup.css">
  </head>
  <body>
    <div class= "full-page">

    </div>
    <div class="center">
      <h1>Register</h1>
      <form id="contact-form" method="get" action="">
        <div class="txt_field">
          <input type="text" id="email" required>
          <span></span>
          <label>Email</label>
        </div>
        <div class="txt_field">
            <input type="number" id="phoneno" required>
            <span></span>
            <label>Phone No.</label>
          </div>
          <div class="txt_field">
            <input type="text" id="dob" required>
            <span></span>
            <label>Date of birth</label>
          </div>
          <div class="txt_field">
            <input type="text" id="gender" required>
            <span></span>
            <label>Gender</label>
          </div>
          
          <div class="txt_field">
            <input type="text" id="name" required>
            <span></span>
            <label>Name</label>
          </div>

        <div class="txt_field">
          <input type="password" id="pass" required>
          <span></span>
          <label>Password</label>
        </div>

        <div>
          <input type="file">
          <span></span>
          <label>Upload ID Proof</label>
        </div>

        
        <input type="submit" value="Signup" onclick="validateCustomer()" >
        <div class="signup_link">
          Copyright 2017-2021 <a href="#"></a>
        
      </form>
      <script>
    
       async function validateCustomer() {

            const form = document.getElementById("frm");

            const dob = document.getElementById("dob").value;
            const email = document.getElementById("email").value;
            const gender = document.getElementById("gender").value;
            const name = document.getElementById("name").value;
            const password = document.getElementById("pass").value;
            const phone= Number(document.getElementById("phoneno").value);


            if (dob == "" || dob == null) {
                window.alert("Invalid dob ");
            }
            else if (email == null || email == "") {
                window.alert("Email Should not be null ");
            }
            else if (gender == null || gender == "") {
                window.alert("gender Not Null");
                return false;
            }
            else if (name== null || name == "") {
                widnow.alert("Name Not Null");
                return false;
            }
            else if (password == null || password == "") {
                window.alert("password Not Null");
            }
            else if(phone ==null || phone==""){
                window.alert("phone no not null");
            }
            else {

                const customerObj = {
                        "id":null,
                        "name": name,
                        "email": email,
                        "password": password,
                        "gender": gender,
                        "dob": dob,
                        "phone": phone
                }
                
                
               
                    const url = 'http://localhost:9191/api/signup';
                    
                    const data = {
                        method: 'POST',
                        headers: {
                            'Accept': 'application/json',
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(customerObj)
                    };
                    console.log("done with stringify");
                    console.log(data);
                    const rawResponse = await fetch(url, data);
                    const content = await rawResponse.json();

                    console.log(content);
               

                //   form.submit();
            }
        }

    </script>
    </div>

  </body>
</html>
